(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{104:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(3),s=n.n(o),i=(n(14),n(15)),u=n.n(i);u.a.interceptors.response.use(function(e){return e},function(e){return Promise.reject(e)});var c=u.a;n(2);var l=n(33),g=n.n(l),p=n(34),h=n.n(p),m=n(35),d=n.n(m);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function S(e,t,n,r){e=(e+"").replace(/[^0-9+\-Ee.]/g,"");var a=isFinite(+e)?+e:0,o=isFinite(+t)?Math.abs(t):0,s=void 0===r?",":r,i=void 0===n?".":n,u="";return(u=(o?function(e,t){var n=Math.pow(10,t);return""+Math.round(e*n)/n}(a,o):""+Math.round(a)).split("."))[0].length>3&&(u[0]=u[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,s)),(u[1]||"").length<o&&(u[1]=u[1]||"",u[1]+=new Array(o-u[1].length+1).join("0")),u.join(i)}function N(e,t){return"tag"===e.type&&"span"===e.name?null:"tag"===e.type&&"ul"===e.name?(e.name="ol",Object(o.convertNodeToElement)(e,t,N)):"tag"===e.type&&"b"===e.name?a.a.createElement("i",{key:t},Object(o.processNodes)(e.children,N)):"tag"===e.type&&"a"===e.name?(e.attribs.target="_blank",Object(o.convertNodeToElement)(e,t,N)):"tag"===e.type&&"button"===e.name?a.a.createElement(Button,{variant:"contained",color:"primary",key:t},Object(o.processNodes)(e.children,N)):void 0}function k(){return!0}function O(e,t){var n=E(e.trim());if(""===n)return[];var r=new RegExp("\\b"+n,"i"),a=t.filter(function(e){return r.test(_(e))});return 0===a.length?[{isAddNew:!0}]:a}function _(e){return e.isAddNew?this.state.value:"".concat(e.value," - ").concat(e.author)}var j=function(e){return a.a.createElement("div",{className:"input-group"},a.a.createElement("i",{className:"vnb vb-search"}),a.a.createElement("input",e),a.a.createElement("button",{title:"Tìm sách",className:"search-magnifier btn",type:"submit"},"Tìm sách"))},F=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=y(this,b(t).call(this))).onChange=function(t,n){var r=n.newValue;n.method;e.setState({value:r})},e.onFocus=function(){e.setState({isFocused:!0})},e.onBlur=function(){e.setState({isFocused:!1})},e.onSuggestionsFetchRequested=function(t){var n=E(t.value.trim());if(""===n)e.setState({suggestions:[{isAddNew:!0}]});else{var r=new URLSearchParams;r.append("text",n),new Promise(function(t,a){c.post("https://www.vinabook.com/?dispatch=products.suggest",r).then(function(r){return e.setState({suggestions:O(n,JSON.parse(r.data.text))}),t()}).catch(function(e){var t=e.status,n={error:null,statusCode:t};return 401===t&&(n.error=e.statusText),a(n)})})}},e.onSuggestionsClearRequested=function(){e.setState({suggestions:[]})},e.onSuggestionSelected=function(e,t){var n=t.suggestion;window.location.href=n.seo_name+".html"},e.renderSuggestion=function(t,n){var r=n.query;if(t.isAddNew)return a.a.createElement("div",{className:"vnb-custom-autosuggest"},a.a.createElement("span",null,"Từ Khóa Hot"),a.a.createElement("ul",null,e.state.hot_keywords.map(function(e,t){return a.a.createElement("li",{key:t},a.a.createElement("a",{href:"/?q=".concat(e.name)},e.name))})));var o="".concat(t.label),i=h()(o,r),u=d()(o,i),c={decodeEntities:!0,transform:N};return a.a.createElement("div",{className:"suggestion-content"},a.a.createElement("div",{className:"image-wrapper ".concat("author"==t.type&&"radius")},a.a.createElement("img",{src:t.image?t.image:"/public/images/no_image.png"})),a.a.createElement("div",{className:"content-wrapper"},a.a.createElement("p",{className:"suggestion-name"},u.map(function(e,t){var n=e.highlight?"highlight":null;return a.a.createElement("span",{className:n,key:t},s()(e.text,c))})),"book"!=t.type?a.a.createElement("p",{className:"suggestion-type"},function(){switch(t.type){case"author":return"Tác giả";case"publisher":return"Nhà phát hành"}}()):a.a.createElement("div",null,function(){if(""!=t.author)return a.a.createElement("p",{className:"suggestion-author"},"Tác giả: ",t.author)}(),a.a.createElement("p",{className:"suggestion-price"},S(t.price)," ",s()("&#8363;",c),function(){if(t.price<t.list_price)return a.a.createElement("b",null,S(t.list_price)," ",s()("&#8363;",c))}()))))},e.state={value:"",suggestions:[],isFocused:!1},new Promise(function(t,n){c.get("https://www.vinabook.com/?dispatch=products.hot_keywords").then(function(n){return e.setState({hot_keywords:JSON.parse(n.data.text)}),t()})}),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentDidUpdate",value:function(){this.state.isFocused?0==$(".tygh-header").find(".tygh-header-overlay").length&&$(".tygh-header").append('<div class="tygh-header-overlay"></div>'):$(".tygh-header").find(".tygh-header-overlay").remove()}},{key:"render",value:function(){var e=this.state,t=e.value,n=e.suggestions,r=(e.isFocused,{name:"q",placeholder:"Tìm kiếm tựa sách, tác giả",value:t,onChange:this.onChange,onFocus:this.onFocus,onBlur:this.onBlur});return a.a.createElement("div",null,a.a.createElement("form",null,a.a.createElement(g.a,{shouldRenderSuggestions:k,suggestions:n,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,onSuggestionSelected:this.onSuggestionSelected,getSuggestionValue:_,renderSuggestion:this.renderSuggestion,renderInputComponent:j,inputProps:r})))}}])&&v(n.prototype,o),i&&v(n,i),t}();t.default=F},55:function(e,t){}}]);