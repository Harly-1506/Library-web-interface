var Tygh={embedded:"undefined"!=typeof TYGH_LOADER,otherjQ:"undefined"!=typeof TYGH_LOADER&&TYGH_LOADER.otherjQ,container:"tygh_main_container",init_container:"tygh_container",doc:"undefined"!=typeof TYGH_LOADER?document.getElementById("tygh_container"):document,lang:{},area:"",tr:function(e,t){return"string"==typeof e&&void 0===t?Tygh.lang[e]:void 0!==t?(Tygh.lang[e]=t,!0):"object"==typeof e&&(Tygh.$.extend(Tygh.lang,e),!0)}};function fn_print_r(e){fn_alert(fn_print_array(e))}function fn_alert(e,t){e=t?e:fn_strip_tags(e),alert(e)}function fn_print_array(e,t){var a="";t||(t=0);for(var i="",r=0;r<t+1;r++)i+="    ";if("object"==typeof e)for(var o in e){var n=e[o];"object"==typeof n?(a+=i+"'"+o+"' ...\n",a+=fn_print_array(n,t+1)):a+=i+"'"+o+"' => \""+n+'"\n'}else a=e+" ("+typeof e+")";return a}function fn_url(e){var t=Tygh.current_location+"/"+Tygh.index_script,a=Tygh.$.parseUrl(e);return""==e?e=t:a.file!=Tygh.index_script&&(e=0==e.indexOf("?")?t+e:t+"?dispatch="+e.replace("?","&")),e}function fn_strip_tags(e){return e=e.replace(/<.*?>/g,"")}function fn_reload_form(e){var t=e.parents("form"),a=t.parent(),i=t.find("input[type='submit']");if(i.length||(i=Tygh.$("[data-ca-target-form="+t.prop("name")+"]")),a.length&&i.length){var r,o=t.prop("action")+"?reload_form=1&"+i.prop("name"),n=t.serializeObject();r="undefined"!=n.result_ids?n.result_ids:a.prop("id"),Tygh.$.ceAjax("request",fn_url(o),{data:n,result_ids:r})}}function fn_get_listed_lang(e){Tygh.$;var t=[Tygh.cart_language,Tygh.default_language,"en"],a="";if(e.length){a=e[0];for(var i=0;i<t.length;i++)if(-1!=Tygh.$.inArray(t[i],e)){a=t[i];break}}return a}function fn_query_remove(e,t){if(void 0===t)return e;"string"==typeof t&&(t=[t]);var a=e;if(e.indexOf("?")>=0){a=e.substr(0,e.indexOf("?")+1);for(var i=e.substr(e.indexOf("?")+1).split("&"),r=[],o=!0,n="",s=0;s<i.length;s++){r=i[s].split("="),o=!0;for(var c=0;c<t.length;c++)if(t[c]==r[0]||-1!=r[0].indexOf(t[c]+"[")){o=!1;break}1==o&&(a+=n+r[0]+"="+r[1]),n="&"}}return a}function fn_show_promotion_popup(){Tygh.$.ceNotification("show",{type:"I",title:Tygh.tr("text_full_mode_required"),message:Tygh.promo_data})}!function(_,$){if(_.$=$,_.embedded){var oAppendTo=$.fn.appendTo,oAppend=$.fn.append;$.fn.extend({appendTo:function(e){return $(e).is("body")&&(e=_.body),oAppendTo.call(this,e)},append:function(e){var t=$(this);return t.is("body")&&(t=_.body),oAppend.call(t,e)}})}var g,h,i,j,l,Ad,Dd,Bd,Cd,Ze,$e,af,bf,cf,nf,of,If,Jf,Kf,$f,_f,eg,fg,vg,Tg,Ug,$g,_g,qh,rh,xh,yh,Aj,lk,mk,nk;if(g=$,h=navigator.userAgent.toLowerCase(),i=/(chrome)[ \/]([\w.]+)/.exec(h)||/(webkit)[ \/]([\w.]+)/.exec(h)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(h)||/(msie) ([\w.]+)/.exec(h)||h.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(h)||[],j={browser:i[1]||"",version:i[2]||"0"},l={},j.browser&&(l[j.browser]=!0,l.version=j.version),l.chrome?l.webkit=!0:l.webkit&&(l.safari=!0),g.browser=l,$.extend({lastClickedElement:null,getWindowSizes:function(){var e=document.compatMode&&"BackCompat"!=document.compatMode?document.documentElement:document.body;return{offset_x:e.scrollLeft?e.scrollLeft:self.pageXOffset?self.pageXOffset:0,offset_y:e.scrollTop?e.scrollTop:self.pageYOffset?self.pageYOffset:0,view_height:self.innerHeight?self.innerHeight:e.clientHeight,view_width:self.innerWidth?self.innerWidth:e.clientWidth,height:e.scrollHeight?e.scrollHeight:window.height,width:e.scrollWidth?e.scrollWidth:window.width}},disable_elms:function(e,t){$("#"+e.join(",#")).prop("disabled",t)},ua:{version:navigator.userAgent.toLowerCase().indexOf("chrome")>=0?(navigator.userAgent.match(/.+(?:chrome)[\/: ]([\d.]+)/i)||[])[1]:navigator.userAgent.toLowerCase().indexOf("msie")>=0?(navigator.userAgent.match(/.*?msie[\/:\ ]([\d.]+)/i)||[])[1]:(navigator.userAgent.match(/.+(?:it|pera|irefox|ersion)[\/: ]([\d.]+)/i)||[])[1],browser:navigator.userAgent.toLowerCase().indexOf("chrome")>=0?"Chrome":$.browser.safari?"Safari":$.browser.opera?"Opera":$.browser.msie?"Internet Explorer":"Firefox",os:-1!=navigator.platform.toLowerCase().indexOf("mac")?"MacOS":-1!=navigator.platform.toLowerCase().indexOf("win")?"Windows":"Linux",language:navigator.language?navigator.language:navigator.browserLanguage?navigator.browserLanguage:navigator.userLanguage?navigator.userLanguage:navigator.systemLanguage?navigator.systemLanguage:""},is:{email:function(e){return!!/^([\w-+=_]+(?:\.[\w-+=_]+)*)@((?:[-a-zA-Z0-9]+\.)*[a-zA-Z0-9][-a-zA-Z0-9]{0,65}[a-zA-Z0-9])\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i.test(e)},blank:function(e){return null==e||""==e.replace(/[\n\r\t]/gi,"")},integer:function(e){return!(!/^[0-9]+$/.test(e)||$.is.blank(e))},color:function(e){return!(!/^\#[0-9a-fA-F]{6}$/.test(e)||$.is.blank(e))},phone:function(e){var t=3,a=e.indexOf("("),i="";if((e=$.trim(e)).indexOf("+")>1)return!1;if(-1!=e.indexOf("-")&&(t+=1),-1!=e.indexOf("(")&&e.indexOf("(")>t||-1!=e.indexOf("(")&&")"!=e.charAt(a+4)||-1==e.indexOf("(")&&-1!=e.indexOf(")"))return!1;for(var r=0;r<e.length;r++){var o=e.charAt(r);-1=="()- +".indexOf(o)&&(i+=o)}return $.is.integer(i)&&i.length>=10}},cookie:{get:function(e){for(var t=e+"=",a=t.length,i=document.cookie.length,r=0;r<i;){var o=r+a;if(document.cookie.substring(r,o)==t){var n=document.cookie.indexOf(";",o);return-1==n&&(n=document.cookie.length),unescape(document.cookie.substring(o,n))}if(0==(r=document.cookie.indexOf(" ",r)+1))break}return null},set:function(e,t,a,i,r,o){document.cookie=e+"="+escape(t)+(a?"; expires="+a.toGMTString():"")+(i?"; path="+i:"")+(r?"; domain="+r:"")+(o?"; secure":"")},remove:function(e,t,a){$.cookie.get(e)&&(document.cookie=e+"="+(t?"; path="+t:"")+(a?"; domain="+a:"")+"; expires=Thu, 01-Jan-70 00:00:01 GMT")}},redirect:function(e,t){t=t||!1,$("base").length&&0!=e.indexOf("/")&&0!==e.indexOf("http")&&(e=$("base").prop("href")+e),_.embedded?$.ceAjax("request",e,{result_ids:_.container}):t?window.location.replace(e):window.location.href=e},dispatchEvent:function(e){var jelm=$(e.target),elm=e.target,s;if(e.which=e.which||1,("click"==e.type||"mousedown"==e.type)&&$.browser.mozilla&&1!=e.which)return!0;if("click"==e.type){if($.getProcessItemsMeta(elm)){if(!$.checkSelectedItems(elm))return!1}else if((jelm.hasClass("cm-confirm")||jelm.parents().hasClass("cm-confirm"))&&!jelm.parents().hasClass("cm-skip-confirmation")&&!1===confirm(_.tr("text_are_you_sure_to_proceed")))return!1;if($.lastClickedElement=jelm,jelm.hasClass("cm-disabled"))return!1;if(jelm.hasClass("cm-delete-row")||jelm.parents(".cm-delete-row").length){var holder;if(jelm.is("tr")||jelm.hasClass("cm-row-item"))holder=jelm;else if(jelm.parents(".cm-row-item").length)holder=jelm.parents(".cm-row-item:first");else{if(!jelm.parents("tr").length||$(".cm-picker",jelm.parents("tr:first")).length)return!1;holder=jelm.parents("tr:first")}$(".cm-combination[id^=off_]",holder).click(),holder.parent("tbody.cm-row-item").length&&(holder=holder.parent("tbody.cm-row-item")),jelm.hasClass("cm-ajax")||jelm.parents(".cm-ajax").length?($.ceAjax("clearCache"),holder.remove()):holder.hasClass("cm-opacity")?($(":input",holder).each(function(){$(this).prop("name",$(this).data("caInputName"))}),holder.removeClass("cm-delete-row cm-opacity"),($.browser.msie||$.browser.opera)&&$("*",holder).removeClass("cm-opacity")):($(":input[name]",holder).each(function(){$(this).data("caInputName",$(this).prop("name")).prop("name","")}),holder.addClass("cm-delete-row cm-opacity"),($.browser.msie&&$.browser.version<9||$.browser.opera)&&$("*",holder).addClass("cm-opacity"))}if(jelm.hasClass("cm-save-and-close")&&jelm.parents("form:first").append('<input type="hidden" name="return_to_list" value="Y" />'),jelm.hasClass("cm-new-window")&&jelm.prop("href"))return window.open(jelm.prop("href")),!1;if(jelm.hasClass("cm-external-click")||jelm.parents(".cm-external-click").length){var _e=jelm.hasClass("cm-external-click")?jelm:jelm.parents(".cm-external-click:first"),c_elm=_e.data("caExternalClickId");c_elm&&$("#"+c_elm).length&&$("#"+c_elm).click(),_e.data("caScroll")&&$.scrollToElm($("#"+_e.data("caScroll")))}if(jelm.closest(".cm-dialog-opener").length){var _e=jelm.closest(".cm-dialog-opener"),params=$.ceDialog("get_params",_e);return $("#"+_e.data("caTargetId")).ceDialog("open",params),!1}if("modal"==jelm.data("toggle")&&$.ceDialog("get_last").length){var href=jelm.prop("href"),target=$(jelm.data("target")||href&&href.replace(/.*(?=#[^\s]+$)/,""));if(target.length){var minZ=$.ceDialog("get_last").zIndex();target.zIndex(minZ+2),target.on("shown",function(){$(this).data("modal").$backdrop.zIndex(minZ+1)})}}var restore_needed=jelm.hasClass("cm-cancel");if(restore_needed&&jelm.parents("form").length&&(jelm.parents("form").get(0).reset(),jelm.parents("form").find(".error-message").remove()),"Y"==_.changes_warning&&jelm.parents(".cm-confirm-changes").length&&jelm.parents("form").length&&jelm.parents("form:first").formIsChanged()&&!1===confirm(_.tr("text_changes_not_saved")))return!1;if(jelm.hasClass("cm-check-items")||jelm.parents(".cm-check-items").length){var form=elm.form;form||(form=jelm.parents("form:first"));var item_class=".cm-item"+(jelm.data("caTarget")?"-"+jelm.data("caTarget"):"");jelm.data("caStatus")&&($("input"+item_class+"[type=checkbox]:not(:disabled)",form).prop("checked",!1),item_class+=".cm-item-status-"+jelm.data("caStatus"));var inputs=$("input"+item_class+"[type=checkbox]:not(:disabled)",form);if(inputs.length){var flag=!0;jelm.is("[type=checkbox]")&&(flag=jelm.prop("checked")),jelm.hasClass("cm-on")?flag=!0:jelm.hasClass("cm-off")&&(flag=!1),inputs.prop("checked",flag)}}else{if(jelm.hasClass("cm-promo-popup")||jelm.parents(".cm-promo-popup").length)return fn_show_promotion_popup(),!1;if("submit"==jelm.prop("type")||jelm.closest("button[type=submit]").length){var _jelm=jelm.is("input,button")?jelm:jelm.closest("button[type=submit]");return $(_jelm.prop("form")).ceFormValidator("setClicked",_jelm),!_jelm.hasClass("cm-no-submit")}if(jelm.is("a")&&jelm.hasClass("cm-ajax")&&jelm.prop("href")||jelm.parents("a.cm-ajax").length&&jelm.parents("a.cm-ajax:first").prop("href"))return $.ajaxLink(e);if(jelm.parents(".cm-reset-link").length||jelm.hasClass("cm-reset-link")){var frm=jelm.parents("form:first");$("[type=checkbox]",frm).prop("checked",!1).change(),$("input[type=text], input[type=password], input[type=file]",frm).val(""),$("select",frm).each(function(){$(this).val($("option:first",this).val()).change()});var radio_names=[];return $("input[type=radio]",frm).each(function(){-1==$.inArray(this.name,radio_names)?($(this).prop("checked",!0).change(),radio_names.push(this.name)):$(this).prop("checked",!1)}),!0}if(jelm.hasClass("cm-submit")||jelm.parents(".cm-submit").length){if(!jelm.is("select,input"))return $.submitForm(jelm)}else{if(jelm.hasClass("cm-popup-switch")||jelm.parents(".cm-popup-switch").length)return jelm.parents(".cm-popup-box:first").hide(),!1;if((s=elm.className.match(/cm-combinations([-\w]+)?/gi))||(s=jelm.parent().get(0).className.match(/cm-combinations(-[\w]+)?/gi))){var p_elm=jelm.prop("id")?jelm:jelm.parent(),class_group=s[0].replace(/cm-combinations/,""),id_group=p_elm.prop("id").replace(/on_|off_|sw_/,"");return $("#on_"+id_group).toggle(),$("#off_"+id_group).toggle(),0==p_elm.prop("id").indexOf("sw_")?$('[data-ca-switch-id="'+id_group+'"]').toggle():0==p_elm.prop("id").indexOf("on_")?$(".cm-combination"+class_group+':visible[id^="on_"]').click():$(".cm-combination"+class_group+':visible[id^="off_"]').click(),!0}if(elm.className.match(/cm-combination(-[\w]+)?/gi)||jelm.parent().length&&void 0!==jelm.parent().get(0).className&&jelm.parent().get(0).className.match(/cm-combination(-[\w]+)?/gi)||jelm.parents(".cm-combination").length){var p_elm=jelm.parents(".cm-combination").length?jelm.parents(".cm-combination:first"):jelm.prop("id")?jelm:jelm.parent(),id,prefix;p_elm.prop("id")&&(prefix=p_elm.prop("id").match(/^(on_|off_|sw_)/)[0]||"",id=p_elm.prop("id").replace(/^(on_|off_|sw_)/,""));var container=$("#"+id),flag="on_"!=prefix&&("off_"==prefix||!!container.is(":visible"));jelm.hasClass("cm-uncheck")&&$("#"+id+" [type=checkbox]").prop("disabled",flag),container.removeClass("hidden"),container.toggleBy(flag),$.ceEvent("trigger","ce.switch_"+id,[flag]),container.is(".cm-smart-position:visible")&&container.position({my:"right top",at:"right top",of:p_elm});var s_elm=jelm.hasClass("cm-save-state")?jelm:!!p_elm.hasClass("cm-save-state")&&p_elm;if(s_elm){var _s=s_elm.hasClass("cm-ss-reverse")?":hidden":":visible";container.is(_s)?$.cookie.set(id,1):$.cookie.remove(id)}if("sw_"==prefix&&(p_elm.hasClass("cm-combo-on")?(p_elm.removeClass("cm-combo-on"),p_elm.addClass("cm-combo-off")):p_elm.hasClass("cm-combo-off")&&(p_elm.removeClass("cm-combo-off"),p_elm.addClass("cm-combo-on"))),$("#on_"+id).removeClass("hidden").toggleBy(!flag),$("#off_"+id).removeClass("hidden").toggleBy(flag),$.ceDialog("fit_elements",{container:container,jelm:jelm}),!jelm.is("[type=checkbox]"))return!1}else{if((jelm.is("a.cm-increase, a.cm-decrease")||jelm.parents("a.cm-increase").length||jelm.parents("a.cm-decrease").length)&&jelm.parents(".cm-value-changer").length){var inp=$("input",jelm.closest(".cm-value-changer")),step=1;inp.attr("data-ca-step")&&(step=parseInt(inp.attr("data-ca-step")));var new_val=parseInt(inp.val())+(jelm.is("a.cm-increase")||jelm.parents("a.cm-increase").length?step:-step);return inp.val(new_val>0?new_val:0),inp.keypress(),!0}if(jelm.hasClass("cm-external-focus")||jelm.parents(".cm-external-focus").length){var f_elm=jelm.data("caExternalFocusId")?jelm.data("caExternalFocusId"):jelm.parents(".cm-external-focus:first").data("caExternalFocusId");f_elm&&$("#"+f_elm).length&&$("#"+f_elm).focus()}else{if(jelm.hasClass("cm-previewer")||jelm.parent().hasClass("cm-previewer")){var lnk=jelm.hasClass("cm-previewer")?jelm:jelm.parent();return lnk.cePreviewer("display"),!1}if(jelm.hasClass("cm-update-for-all-icon")){jelm.toggleClass("visible"),jelm.prop("title",jelm.data("caTitle"+(jelm.hasClass("visible")?"Active":"Disabled"))),$("#hidden_update_all_vendors_"+jelm.data("caDisableId")).prop("disabled",!jelm.hasClass("visible")),jelm.data("caHideId")&&($("[id*="+jelm.data("caHideId")+"]").parent().find(":input:visible").prop("disabled",!jelm.hasClass("visible")),$("[id*="+jelm.data("caHideId")+"]").parent().find(":input[type=hidden]").prop("disabled",!jelm.hasClass("visible")),$("[id*="+jelm.data("caHideId")+"]").parent().find("textarea.cm-wysiwyg").ceEditor("disable",!jelm.hasClass("visible")));var state_select_trigger=$(".cm-state").parent().find(".cm-update-for-all-icon");$("#"+jelm.data("caHideId")).hasClass("cm-country")&&jelm.hasClass("visible")!=state_select_trigger.hasClass("visible")&&state_select_trigger.click();var country_select_trigger=$(".cm-country").parent().find(".cm-update-for-all-icon");$("#"+jelm.data("caHideId")).hasClass("cm-state")&&jelm.hasClass("visible")!=country_select_trigger.hasClass("visible")&&country_select_trigger.click()}else if(jelm.hasClass("cm-combo-checkbox")){var combo_block=jelm.parents(".control-group:first"),combo_select=combo_block.next(".control-group").find("select.cm-combo-select:first");if(combo_select.length){var options=$(".cm-combo-checkbox:checked",combo_block),_options="";0===options.length?_options+='<option value="'+jelm.val()+'">'+$("label[for="+jelm.prop("id")+"]").text()+"</option>":$.each(options,function(){var e=$(this),t=e.val(),a=$("label[for="+e.prop("id")+"]").text();_options+='<option value="'+t+'">'+a+"</option>"}),combo_select.html(_options)}}else if(jelm.hasClass("cm-toggle-checkbox"))$(".cm-toggle-element").prop("disabled",!$(".cm-toggle-checkbox").prop("checked"));else if(jelm.hasClass("cm-switch-availability")){var linked_elm=jelm.prop("id").replace("sw_","").replace(/_suffix.*/,""),state,hide_flag=!1;jelm.hasClass("cm-switch-visibility")&&(hide_flag=!0),jelm.is("[type=checkbox],[type=radio]")?state=jelm.hasClass("cm-switch-inverse")?jelm.prop("checked"):!jelm.prop("checked"):jelm.hasClass("cm-switched")?(jelm.removeClass("cm-switched"),state=!0):(jelm.addClass("cm-switched"),state=!1),$("#"+linked_elm).switchAvailability(state,hide_flag)}else(jelm.hasClass("cm-back-link")||jelm.parents(".cm-back-link").length)&&parent.history.back()}}}}if(jelm.closest(".cm-dialog-closer").length&&$.ceDialog("get_last").ceDialog("close"),jelm.is("a")||jelm.parents("a").length){var _lnk=jelm.is("a")?jelm:jelm.parents("a:first");if($.showPickerByAnchor(_lnk.prop("href")),$.browser.msie&&_lnk.prop("href")&&-1!=_lnk.prop("href").indexOf("window.open"))return eval(_lnk.prop("href")),!1}if(_.embedded&&(jelm.is("a")||jelm.parents("a").length))return $.ajaxLink(e,_.container)}else{if("keydown"==e.type){var char_code=e.which?e.which:e.keyCode;if(27==char_code){var comet_controller=$("#comet_container_controller");if(comet_controller.length&&0!=comet_controller.ceProgress("getValue")&&100!=comet_controller.ceProgress("getValue"))return!1;$.popupStack.last_close();var _notification_container=$(".cm-notification-content-extended:visible");_notification_container.length&&$.ceNotification("close",_notification_container,!1)}return"A"==_.area&&e.ctrlKey&&222==char_code&&(result=prompt("Product ID",""))&&$.redirect(fn_url("products.update?product_id="+result)),!0}if("mousedown"==e.type){if(jelm.hasClass("cm-select-option")){var upd_elm=jelm.parents(".cm-popup-box:first");$("a:first",upd_elm).html(jelm.text()+' <span class="caret"></span>'),$("li a",upd_elm).removeClass("cm-active").addClass("cm-select-option"),$("li",upd_elm).removeClass("disabled"),jelm.removeClass("cm-select-option").addClass("cm-active"),jelm.parents("li:first").addClass("disabled"),$("input",upd_elm).val(jelm.data("caListItem"))}var popups=$(".cm-popup-box:visible");if(popups.length){var zindex=jelm.zIndex(),foundz=0;0==zindex&&(jelm.parents().each(function(){var e=$(this);0==foundz&&0!=e.zIndex()&&(foundz=e.zIndex())}),zindex=foundz),popups.each(function(){var e=$(this);if(e.zIndex()>zindex){if(e.prop("id")){var t=$("#sw_"+e.prop("id"));if(t.length)return void(jelm.closest(t).length||t.click())}e.hide()}})}return!0}if("keyup"==e.type){var elm_val=jelm.val(),negative_expr=new RegExp("^-.*","i");if(jelm.hasClass("cm-value-integer")){var is_negative=negative_expr.test(elm_val),new_val=elm_val.replace(/[^0-9]/g,"");return new_val=is_negative?"-"+new_val:new_val,elm_val!=new_val&&jelm.val(new_val),!0}if(jelm.hasClass("cm-value-decimal")){var is_negative=negative_expr.test(elm_val),new_val=elm_val.replace(/[^.0-9]+/g,"");return new_val=new_val.replace(/([0-9]+[.]?[0-9]*).*$/g,"$1"),elm_val!=new_val&&jelm.val(new_val),!0}if(jelm.hasClass("cm-ajax-content-input")){if(39==e.which||37==e.which)return;var delay=500;void 0!==this.to&&clearTimeout(this.to),this.to=setTimeout(function(){$.loadAjaxContent($("#"+jelm.data("caTargetId")),jelm.val())},delay)}}else if("change"==e.type){if(jelm.hasClass("cm-select-with-input-key")){var value=jelm.val();assoc_input=$("#"+jelm.prop("id").replace("_select","")),assoc_input.prop("value",value),assoc_input.prop("disabled",""!=value),""==value?assoc_input.removeClass("input-text-disabled"):assoc_input.addClass("input-text-disabled")}jelm.hasClass("cm-reload-form")&&fn_reload_form(jelm),jelm.hasClass("cm-submit")&&$.submitForm(jelm)}}},runCart:function(e,t){if(_.body=_.doc==document?$("body"):t,_.area=e,$('<style type="text/css">.cm-noscript {display:none}</style>').appendTo("head"),$(_.doc).on("click mousedown keyup keydown change",function(e){return $.dispatchEvent(e)}),"A"==e){-1==location.href.indexOf("?")&&5==document.location.protocol.length&&_.body.append($.rc64()),$(".cm-numeric",t).autoNumeric("init");$.ceStickyScroll({".subnav.cm-sticky-scroll":{top:41,padding:0},".actions.cm-sticky-scroll":{top:41,padding:37}}),$(".cm-popover").popover({html:!0})}else"C"==e&&$.browser.msie&&$.browser.version<8&&$("ul.dropdown li").hover(function(){$(this).addClass("hover"),$("> .dir",this).addClass("open"),$("ul:first",this).css("display","block")},function(){$(this).removeClass("hover"),$(".open",this).removeClass("open"),$("ul:first",this).css("display","none")});return $(_.doc).on("mouseenter",".cm-tooltip[title]",function(){$(this).data("tooltip")||$(this).ceTooltip(),$(this).data("tooltip").show()}),$.ceNotification("init"),$.showPickerByAnchor(location.href),$.ceEvent("on","ce.ajax_pagination",function(){var e=$(".cm-pagination-wraper:first");$.getWindowSizes().offset_y>e.offset().top&&$.scrollToElm(e)}),$(window).on("load",function(){$.afterLoad(e)}),$(window).on("beforeunload",function(e){var t=$.lastClickedElement;if("Y"==_.changes_warning&&$("form.cm-check-changes").formIsChanged()&&(null===t||t&&!t.is("[type=submit]")&&!t.is("input[type=image]")&&!t.hasClass("cm-submit")&&!t.parents().hasClass("cm-submit")&&!t.hasClass("cm-confirm")&&!t.parents().hasClass("cm-confirm")))return _.tr("text_changes_not_saved")}),$.ceHistory("init"),$(_.doc).on("click",".cm-popup-title",function(){$(this).hasClass("cm-popup-title-on")?($(this).removeClass("cm-popup-title-on"),$(this).parents(".dropdown-box-v5").removeClass("dropdown-box-on")):($(this).addClass("cm-popup-title-on"),$(this).parents(".dropdown-box-v5").addClass("dropdown-box-on"))}),$.commonInit(),!0},commonInit:function(e){if(e=$(e||_.doc),$.fn.ceTabs&&$(".cm-j-tabs",e).ceTabs(),$.fn.ceProductImageGallery&&$(".cm-image-gallery",e).ceProductImageGallery(),$.processForms(e),e.hasClass("cm-hide-inputs")&&e.disableFields(),$(".cm-hide-inputs",e).disableFields(),$(".cm-range-slider",e).ceRangeSlider(),$(".cm-hint",e).ceHint("init"),$(".cm-focus",e).focus(),$(".cm-autocomplete-off",e).prop("autocomplete","off"),$(".cm-generate-image",e).ceThumbnails(),$(".cm-ajax-content-more",e).each(function(){var e=$(this);e.appear(function(){$.loadAjaxContent(e)},{one:!1,container:"#scroller_"+e.data("caTargetId")})}),$(".cm-colorpicker",e).ceColorpicker(),$(".cm-sortable",e).ceSortable(),$("select.cm-country",e).ceRebuildStates(),$(".dropdown-menu",e).on("click",function(e){var t=$(e.target);if(t.is("a")){if(!$("input[type=checkbox]:enabled",t).length)return!t.hasClass("cm-ajax")||($("a.dropdown-toggle",t.parents(".dropdown:first")).dropdown("toggle"),!0);$("input[type=checkbox]:enabled",t).click()}$.dispatchEvent(e),e.stopPropagation()}),$(".cm-back-link").length){var t=!0;$.browser.opera?0==parent.history.length&&(t=!1):1==parent.history.length&&(t=!1),t||$(".cm-back-link").addClass("cm-disabled")}$.ceEvent("trigger","ce.commoninit",[e])},afterLoad:function(e){return!0},processForms:function(e){var t=$("form:not(.cm-processed-form)",e);if(t.addClass("cm-processed-form"),t.ceFormValidator(),"A"==_.area){t.filter("[method=post]").addClass("cm-check-changes");var a=0==t.length?e:t;$("textarea.cm-wysiwyg",a).appear(function(){$(this).ceEditor()})}},formatPrice:function(e,t){void 0===t&&(t=2);var a=(e=parseFloat(e.toString())+1e-11).toFixed(t);return"."==a.charAt(0)?"0"+a:a},formatNum:function(e,t,a){var i="",r="",o=0,n=0,s=0,c=_.currencies,l=1==a?c.primary.thousands_separator:c.secondary.thousands_separator,d=1==a?c.primary.decimals_separator:c.secondary.decimals_separator,p=(t=1==a?c.primary.decimals:c.secondary.decimals,!0);if(e=e.toString(),o=parseInt(e),t>0){if(-1!=e.indexOf(".")){var h=e.substr(e.indexOf(".")+1,e.length);h.length>t?((r=Math.round(h/Math.pow(10,h.length-t)).toString()).length>t&&(o=Math.floor(o)+1,r="0"),p=!1):r=e.substr(e.indexOf(".")+1,t)}else r="0";if(r.length<t){var m=r.length;for(s=0;s<t-m;s++)p?r+="0":r="0"+r}}else e=Math.round(parseFloat(e)),o=parseInt(e);if((i=o.toString()).length>=4&&""!=l){o=new Array;for(s=i.length-3;s>-4&&(n=3,s<0&&(n=3+s,s=0),o.push(i.substr(s,n)),0!=s);s-=3);i=o.reverse().join(l)}return t>0&&(i+=d+r),i},utf8Encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",a=0;a<e.length;a++){var i=e.charCodeAt(a);i<128?t+=String.fromCharCode(i):i>127&&i<2048?(t+=String.fromCharCode(i>>6|192),t+=String.fromCharCode(63&i|128)):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128),t+=String.fromCharCode(63&i|128))}return t},crc32:function(e){e=this.utf8Encode(e);var t=0,a=0,i=0;t^=-1;for(var r=0,o=e.length;r<o;r++)i=255&(t^e.charCodeAt(r)),a="0x"+"00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D".substr(9*i,8),t=t>>>8^parseInt(a);return Math.abs(-1^t)},rc64_helper:function(e){var t,a,i,r,o,n,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=ac=0,l="",d=[];do{t=(n=s.indexOf(e.charAt(c++))<<18|s.indexOf(e.charAt(c++))<<12|(r=s.indexOf(e.charAt(c++)))<<6|(o=s.indexOf(e.charAt(c++))))>>16&255,a=n>>8&255,i=255&n,d[ac++]=64==r?String.fromCharCode(t):64==o?String.fromCharCode(t,a):String.fromCharCode(t,a,i)}while(c<e.length);return l=d.join(""),l=$.utf8_decode(l)},utf8_decode:function(e){for(var t=[],a=ac=c1=c2=c3=0;a<e.length;)c1=e.charCodeAt(a),c1<128?(t[ac++]=String.fromCharCode(c1),a++):c1>191&&c1<224?(c2=e.charCodeAt(a+1),t[ac++]=String.fromCharCode((31&c1)<<6|63&c2),a+=2):(c2=e.charCodeAt(a+1),c3=e.charCodeAt(a+2),t[ac++]=String.fromCharCode((15&c1)<<12|(63&c2)<<6|63&c3),a+=3);return t.join("")},rc64:function(){return $.rc64_helper("PGltZyBzcmM9Imh0dHA6Ly93d3cuY3MtY2FydC5jb20vaW1hZ2VzL2JhY2tncm91bmQuZ2lmIiBoZWlnaHQ9IjEiIHdpZHRoPSIxIiBhbHQ9IiIgc3R5bGU9ImRpc3BsYXk6bm9uZSIgLz4=")},toggleStatusBox:function(e,t){var a=10;t=t||_.tr("loading"),e=e||"show";var i=$("#ajax_loading_box");if("show"==e){var r=$("#theme_editor_container");r.length&&r.is(":visible")&&(a+=r.width()/2),$(".ajax-inner-loading-box",i).html(t);var o=-(i.width()+a)/2;i.css("margin-right",o+"px"),i.show()}else i.hide()},scrollToElm:function(e){if(e.length>0){var t,a=50;"A"==_.area&&(a+=125),_.scrolling=!0,t=$.ceDialog("inside_dialog",{jelm:e})?$.ceDialog("get_last").find(".object-container"):$($.browser.opera?"html":"html,body"),$(t).animate({scrollTop:e.offset().top-a},500,function(){_.scrolling=!1})}},showPickerByAnchor:function(e){if(e&&"#"!=e&&-1!=e.indexOf("#")){var t=e.split("#");/^[a-z0-9_]+$/.test(t[1])&&$("#opener_"+t[1]).click()}},ltrim:function(e,t){t=t?t.replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^\:])/g,"$1"):" s ";var a=new RegExp("^["+t+"]+","g");return e.replace(a,"")},rtrim:function(e,t){t=t?t.replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^\:])/g,"$1"):" s ";var a=new RegExp("["+t+"]+$","g");return e.replace(a,"")},loadCss:function(e,t){var a,i=document.getElementsByTagName("head")[0];(t=t||!1)&&$.toggleStatusBox("show");for(var r=0;r<e.length;r++)(a=document.createElement("link")).type="text/css",a.rel="stylesheet",a.href=-1==e[r].indexOf("://")?_.current_location+"/"+e[r]:e[r],a.media="screen",i.appendChild(a),t&&$(a).on("load",function(){$.toggleStatusBox("hide")})},loadAjaxContent:function(e,t){var a=e.data("caTargetId"),i=$("#"+a);if(i.data("ajax_content")){var r=i.data("ajax_content");void 0!==t?(r.pattern=t,r.start=0):r.start+=r.limit,i.data("ajax_content",r)}else i.data("ajax_content",{start:0,limit:10});$.ceAjax("request",e.data("caTargetUrl"),{full_render:e.hasClass("cm-ajax-full-render"),result_ids:a,data:i.data("ajax_content"),caching:!0,append:0!=i.data("ajax_content").start,callback:function(t){"href"==t.action?$("a[data-ca-action]",$("#"+a)).each(function(){var e=$(this),t=fn_query_remove(_.current_url,["switch_company_id","meta_redirect_url"]);t.indexOf("#")>0&&(t=t.substr(0,t.indexOf("#"))),e.prop("href",t+(-1!=t.indexOf("?")?"&":"?")+"switch_company_id="+e.data("caAction")),e.data("caAction","")}):$("a[data-ca-action]",$("#"+a)).each(function(){var t=$(this);t.on("click",function(){$("#"+e.data("caResultId")).val(t.data("caAction")).trigger("change"),$("#"+e.data("caResultId")+"_name").val(t.text()),$("#sw_"+a+"_wrap_").html(t.html()),$.ceEvent("trigger","ce.picker_js_action_"+a,[e]),"C"==_.area&&t.addClass("cm-popup-switch")})}),e.toggle(!t.completed)}})},ajaxLink:function(e,t,a){var i=$(e.target),r=i.is("a")?i:i.parents("a").eq(0),o=r.data("caTargetId"),n=r.prop("href");if(n){var s=r.hasClass("cm-ajax-cache"),c=r.hasClass("cm-ajax-force"),l=r.hasClass("cm-ajax-full-render"),d=r.hasClass("cm-history"),p={result_ids:t||o,force_exec:c,caching:s,save_history:d,obj:r,callback:a||(r.data("caEvent")?r.data("caEvent"):"")};l&&(p.full_render=l),$.ceAjax("request",n,p)}return e.preventDefault(),!0},isJson:function(e){return""!=$.trim(e)&&(e=e.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"/g,""),/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/.test(e))},isMobile:function(){return"iPad"==navigator.platform||"iPhone"==navigator.platform||"iPod"==navigator.platform||navigator.userAgent.match(/Android/i)},parseUrl:function(e){for(var t={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/\/?)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},a=t.parser[t.strictMode?"strict":"loose"].exec(e),i={},r=14;r--;)i[t.key[r]]=a[r]||"";(i.location=i.protocol+"://"+i.host+i.path,i.base_dir="",i.directory)&&((n=i.directory.split("/")).pop(),n.pop(),i.base_dir=n.join("/"));if(i.parsed_query={},i.query){var o=i.query.split("&");for(r=0;r<o.length;r++){var n;2==(n=o[r].split("=")).length&&(i.parsed_query[decodeURIComponent(n[0])]=decodeURIComponent(n[1].replace(/\+/g," ")))}}return i},attachToUrl:function(e,t){return-1==e.indexOf(t)?-1!==e.indexOf("?")?e+"&"+t:e+"?"+t:e},getProcessItemsMeta:function(e){var t=$(e),a=t.prop("class").match(/cm-process-items(-[\w]+)?/gi);return a||(a=t.parent().prop("class").match(/cm-process-items(-[\w]+)?/gi)),a},getTargetForm:function(e){var t;$(e);return e.data("caTargetForm")&&((t=$("form[name="+e.data("caTargetForm")+"]")).length||(t=$("#"+e.data("caTargetForm")))),t&&t.length||(t=e.parents("form")),t},checkSelectedItems:function(e){var t,a,i,r=!1,o=$(e),n=$.getProcessItemsMeta(e);if(!o.length||!n)return!0;for(var s=0;s<n.length;s++)if(t=o.hasClass(n[s])?o:o.parents("."+n[s]),a=$.getTargetForm(t),!(i=$("input.cm-item"+n[s].str_replace("cm-process-items","")+"[type=checkbox]",a)).length||i.filter(":checked").length){r=!0;break}return 0==r?(fn_alert(_.tr("error_no_items_selected")),!1):!(o.hasClass("cm-confirm")&&!o.hasClass("cm-disabled")||o.parents().hasClass("cm-confirm"))||0!=confirm(_.tr("text_are_you_sure_to_proceed"))},submitForm:function(e){var t=e.hasClass("cm-submit")?e:e.parents(".cm-submit"),a=$.getTargetForm(t);if(a.length){a.append('<input type="submit" class="'+t.prop("class")+'" name="'+t.data("caDispatch")+'" value="" style="display:none;" />');var i=$('input[name="'+t.data("caDispatch")+'"]:last',a),r=["caDispatch","caTargetForm"];return $.each(e.data(),function(e,t){0==e.indexOf("ca")&&-1==$.inArray(e,r)&&i.data(e,t)}),i.removeClass("cm-submit"),i.removeClass("cm-confirm"),i.click(),!0}return!1}}),$.fn.extend({toggleBy:function(e){return 0==e||1==e?0==e?this.show():this.hide():this.toggle(),!0},moveOptions:function(e,t){if($("option"+((t=t||{}).move_all?"":":selected")+":not(.cm-required)",this).appendTo(e),t.check_required){var a=[];$("option.cm-required:selected",this).each(function(){a.push($(this).text())}),a.length&&fn_alert(t.message+"\n"+a.join(", "))}return this.change(),$(e).change(),!0},swapOptions:function(e){return $("option:selected",this).each(function(){"up"==e?$(this).prev().insertAfter(this):$(this).next().insertBefore(this)}),this.change(),!0},selectOptions:function(e){return $("option",this).prop("selected",e),!0},alignElement:function(){var e=$.getWindowSizes(),t=$(this);t.css({display:"block",top:e.offset_y+(e.view_height-t.height())/2,left:e.offset_x+(e.view_width-t.width())/2})},formIsChanged:function(){var e=!1;return!$(this).hasClass("cm-skip-check-items")&&($(":input:visible",this).each(function(){return!(e=$(this).fieldIsChanged())}),e)},fieldIsChanged:function(){var e=!1,t=$(this),a=t.get(0);if(!t.hasClass("cm-item")&&!t.hasClass("cm-check-items"))if(t.is("select")){var i=!1,r=[];$("option",t).each(function(){this.defaultSelected&&(i=!0),this.selected!=this.defaultSelected&&r.push(this)}),(1==i&&r.length||1!=i&&(r.length&&"select-multiple"==t.prop("type")||"select-one"==t.prop("type")&&a.selectedIndex>0))&&(e=!0)}else t.is("input[type=radio], input[type=checkbox]")?a.checked!=a.defaultChecked&&(e=!0):a.value!=a.defaultValue&&(e=!0);return e},disableFields:function(){"A"==_.area&&$(this).each(function(){var e=$(this);if(0==e.hasClass("cm-hide-inputs"))return!0;var t=":not(.cm-no-hide-input):not(.cm-no-hide-input *)";$("input[type=text]",e).filter(t).each(function(){var e=$(this),t=e.hasClass("hidden")?" hidden":"";e.hasClass("cm-pagination")||(e.wrap('<span class="shift-input'+t+'">'+e.val()+"</span>"),e.remove())}),$("label.cm-required",e).filter(t).each(function(){$(this).removeClass("cm-required")}),$("textarea",e).filter(t).each(function(){var e=$(this);e.wrap('<div class="shift-input">'+e.val()+"</div>"),e.remove()}),$("select:not([multiple])",e).filter(t).each(function(){var e=$(this),t=e.hasClass("hidden")?" hidden":"";e.wrap('<span class="shift-input'+t+'">'+$(":selected",e).text()+"</span>"),e.remove()}),$("input[type=radio]",e).filter(t).each(function(){var e=$(this),t=$("label[for="+e.prop("id")+"]"),a=e.hasClass("hidden")?" hidden":"";e.prop("checked")?(t.wrap('<span class="shift-input'+a+'">'+t.text()+"</span>"),$('<input type="radio" checked="checked" disabled="disabled">').insertAfter(e)):$('<input type="radio" disabled="disabled">').insertAfter(e),e.prop("id")&&t.remove(),e.remove()}),$(":input:not([type=submit])",e).filter(t).each(function(){var e=$(this);e.hasClass("cm-pagination")||e.prop("disabled",!0)}),$("a[id^='on_b']",e).remove(),$("a[id^='off_b']",e).remove(),$("a",e).filter(t).prop("onclick",""),$("a[id^=opener_picker_], a[data-ca-external-click-id^=opener_picker_]",e).filter(t).each(function(){$(this).remove()}),$(".attach-images-alt",e).filter(t).remove(),$(".select-popup-container",e).filter(t).each(function(){var e=$(this);e.wrap('<span class="view-status">'+$("a.cm-combo-on:first",e).text()+"</span>"),e.remove()}),$("tbody[id^='box_add_']",e).filter(t).remove(),$("tr[id^='box_add_']",e).filter(t).remove(),$("a.cm-delete-row",e).filter(t).each(function(){$(this).remove()}),$(e).removeClass("cm-sortable"),$(".cm-sortable-row",e).filter(t).removeClass("cm-sortable-row"),$("p.description",e).filter(t).remove(),$("a.cm-delete-image-link",e).filter(t).remove(),$(".action-add",e).filter(t).remove(),$(".cm-hide-with-inputs",e).filter(t).remove()})},click:function(e){if(e)return this.on("click",e);$(this).each(function(){if(document.createEventObject)$(this).trigger("click");else{var e=document.createEvent("MouseEvents");e.initEvent("click",!0,!0),this.dispatchEvent(e)}})},switchAvailability:function(e,t){1!=t&&0!=t&&(t=!0),0==e||1==e?($(":input:not(.cm-skip-avail-switch)",this).prop("disabled",e).toggleClass("disabled",e),t&&this.toggle(!e)):($(":input:not(.cm-skip-avail-switch)",this).each(function(){var e=$(this),t=e.prop("disabled");e.prop("disabled",!t),e[t?"removeClass":"addClass"]("disabled")}),t&&this.toggle())},serializeObject:function(){var e={},t=this.serializeArray();$.each(t,function(){void 0!==e[this.name]&&this.name.indexOf("[]")>0?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""});var a=this.find(".cm-j-tabs .cm-active");return void 0!==a&&a.length>0&&(e.active_tab=a.prop("id")),e},positionElm:function(e){var t=$(this);t.css("position","absolute");var a=t.is(":hidden");a&&t.show(),t.position(e),a&&t.hide()}}),String.prototype.str_replace=function(e,t){return this.toString().split(e).join(t)},Ad=$,Bd={open:function(e){var t=Ad(this);if(!t.length)return!1;if((e=e||{}).dragOptimize=!(e.height&&"auto"==e.height||e.width&&"auto"==e.width),t.hasClass("ui-dialog-content")){if(e.view_id&&t.data("caViewId")!=e.view_id&&t.ceDialog("_load_content",e))return!1;t.dialog("isOpen")&&t.dialog("close")}else{if(t.ceDialog("_load_content",e))return!1;t.ceDialog("_init",e),Bd._optimize("move",t,e)}Ad.browser.msie&&"auto"==e.width&&(e.width=t.dialog("option","width")),e&&t.dialog("option",e),Ad.popupStack.add({name:t.prop("id"),close:function(){t.dialog("close")}});var a=t.dialog("open"),i=!!e.scroll&&Ad("#"+e.scroll,t);return i&&i.length&&Ad.scrollToElm(i),a},_is_empty:function(){var e=Ad(this),t=Ad.trim(e.html());return t&&(t=t.replace(/<!--(.*?)-->/g,"")),!Ad.trim(t)},_load_content:function(e){var t=Ad(this);return e.href=e.href||"",!(!e.href||!(t.ceDialog("_is_empty")||e.view_id&&t.data("caViewId")!=e.view_id))&&(e.view_id&&t.data("caViewId",e.view_id),Ad.ceAjax("request",e.href,{full_render:0,result_ids:t.prop("id"),skip_result_ids_check:!0,callback:function(){t.ceDialog("_is_empty")||t.ceDialog("open",e)}}),!0)},close:function(){var e=Ad(this);e.data("close",!0),e.dialog("close"),Ad.popupStack.remove(e.prop("id"))},reload:function(){var e=Bd._get_container_height(Ad(this));Ad(this).dialog("close"),Ad(this).dialog("option","height",e),Ad(this).dialog("open")},resize:function(){Bd._resize(Ad(this))},change_title:function(e){Ad(this).dialog("option","title",e)},_optimize:function(e,t,a){"move"==e?(Dd||(Dd=Ad('<div class="hidden" id="dialog_tmp" />').appendTo(_.body)),a.dragOptimize?Dd.append(t.contents()):t.data("skipDialogOptimization",!0)):"return"==e&&(t.data("skipDialogOptimization")||(t.append(Dd.contents()),Dd.empty()))},_get_buttons:function(e){var t=e.find(".buttons-container"),a=null;if(t.length){var i=e.find(".cm-dialog-opener");i.length?t.each(function(){var e=!1,t=Ad(this);return i.each(function(){var a=Ad(this).data("caTargetId");return!t.parents("#"+a).length||(e=!0,!1)}),e||(a=t),!0}):a=e.find(".buttons-container:last")}return a},_get_container_height:function(e){var t=Ad.getWindowSizes().view_height,a="A"==_.area?55:168,i="A"==_.area?49:45,r=Bd._get_buttons(e);if(r){r.css("position","absolute"),r.addClass("buttons-container-picker"),r.css("width",e.outerWidth()),e.show();var o=r.outerHeight(!0);e.hide(),i=i>o?i:o}e.hasClass("ui-dialog-content")&&(e.css("height","auto"),e.find(".object-container").length&&e.find(".object-container").css("height","auto"));var n=e.outerHeight();return r&&(n+=i),(n+=a)>t&&(n=t),n},_init:function(e){e=e||{};var t=Ad(this),a=0,i=e.dialogClass||"";"A"==_.area&&(a=80);var r=Ad.getWindowSizes(),o=t.parent();t.find("form").length||t.parents(".object-container").length||(e.keepInPlace=!0),Ad.ui.dialog.overlayInstances||(Ad.ui.dialog.overlayInstances=1),t.find("script[src]").remove(),t.wrapInner('<div class="object-container" />'),"auto"==e.height&&(e.height=Bd._get_container_height(t)),Ad.browser.msie&&"auto"==e.width&&(Ad.browser.version<8&&t.appendTo(_.body),e.width=t.outerWidth()+10),t.dialog({title:e.title||null,autoOpen:!1,modal:!0,width:e.width||(r.view_width>926?926:r.view_width-120),height:e.height||r.view_height-a,maxWidth:926,maxHeight:r.view_height-a,position:{my:"center center",at:"center center"},resizable:"undefined"==e.resizable||e.resizable,closeOnEscape:!1,dialogClass:i,appendTo:e.keepInPlace?o:_.body,open:function(t,a){var i=Ad(this),r=i.dialog("widget");r.find(".ui-dialog-titlebar-close").attr({"data-dismiss":"modal",type:"button"}).text("X");var o=1020;if(Cd.length){var n=Cd.pop();i.dialog("option","position",{my:"left top",at:"left+20 top+10",of:Ad("#"+n)}),Cd.push(n),o=Ad("#"+n).zIndex()}r.zIndex(++o),r.prev().zIndex(o),Cd.push(i.prop("id")),Bd._optimize("return",i),Bd._resize(i),Ad("textarea.cm-wysiwyg",i).ceEditor("recover"),e.switch_avail&&i.switchAvailability(!1,!1)},beforeClose:function(t,a){var i=Ad(this);if(Ad("textarea.cm-wysiwyg",i).ceEditor("destroy"),(e.nonClosable||!1)&&!i.data("close"))return!1;Cd.pop(),e.switch_avail&&i.switchAvailability(!0,!1)},resize:function(e,t){Bd._resize(Ad(this))},dragStart:function(){e.dragOptimize&&Ad(this).css("visibility","hidden")},dragStop:function(){e.dragOptimize&&Ad(this).css("visibility","")}})},_resize:function(e){var t=Bd._get_buttons(e),a=e.find(".cm-picker-options-container"),i=e.find(".object-container"),r=0;if(t){t.addClass("buttons-container-picker"),t.css("width",e.width());r=t.outerHeight(!0)}var o=0;a.length&&(o=a.outerHeight(!0));var n="auto"==e.dialog("option","height");n||i.outerHeight(e.height()-(r+o)),o&&(a.positionElm({my:"left top",at:"left bottom",of:i,collision:"none"}),a.css("width",i.outerWidth())),r&&(t.positionElm({my:"left top",at:"left bottom",of:o?a:i,collision:"none"}),Ad.browser.msie&&Ad.browser.version<8&&t.innerWidth(i.innerWidth())),n&&e.height(e.height()+(r+o)),Ad.fn.ceTabs&&Ad(".cm-j-tabs",e).ceTabs("resize")}},Cd=[],Ad.fn.ceDialog=function(e){return Bd[e]?Bd[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void Ad.error("ty.dialog: method "+e+" does not exist"):Bd._init.apply(this,arguments)},Ad.ceDialog=function(e,t){if(t=t||{},"get_last"==e){if(0==Cd.length)return Ad();var a=Ad("#"+Cd[Cd.length-1]);return t.getWidget?a.dialog("widget"):a}if("fit_elements"==e)t.jelm.parents(".cm-picker-options-container").length&&Ad.ceDialog("get_last").data("dialog")._trigger("resize");else if("reload_parent"==e){if(a=t.jelm.closest(".ui-dialog-content"),Ad(".object-container",a).length||a.wrapInner('<div class="object-container" />'),a.length&&a.is(":visible")){var i=!0;"resizable"in t&&(i=a.dialog("option","resizable")==t.resizable),i?a.ceDialog("reload"):a.ceDialog("resize")}}else{if("inside_dialog"==e)return 0!=t.jelm.closest(".ui-dialog-content").length;if("get_params"==e){var r={keepInPlace:t.hasClass("cm-dialog-keep-in-place"),nonClosable:t.hasClass("cm-dialog-non-closable"),scroll:t.data("caScroll")?t.data("caScroll"):""};if(t.prop("href")&&(r.href=t.prop("href")),t.hasClass("cm-dialog-auto-size")?(r.width="auto",r.height="auto",r.resizable=!1):t.hasClass("cm-dialog-auto-width")&&(r.width="auto"),t.hasClass("cm-dialog-switch-avail")&&(r.switch_avail="true"),0==Ad("#"+t.data("caTargetId")).length){var o=t.data("caDialogTitle")?t.data("caDialogTitle"):t.prop("title");Ad('<div class="hidden" title="'+o+'" id="'+t.data("caTargetId")+'">\x3c!--'+t.data("caTargetId")+"--\x3e</div>").appendTo(_.body)}return t.prop("href")&&t.data("caViewId")&&(r.view_id=t.data("caViewId")),r}}},Ad.extend({popupStack:{stack:[],add:function(e){return this.stack.push(e)},remove:function(e){for(var t=[],a=0;a<this.stack.length;a++)this.stack[a].name!=e&&t.push(this.stack[a]);var i=this.stack!=t;return this.stack=t,i},last_close:function(){return obj=this.stack.pop(),!(!obj||!obj.close||(obj.close(),0))},last:function(){return this.stack[this.stack.length-1]},close:function(e){for(var t=[],a=0;a<this.stack.length;a++)this.stack[a].name!=e?t.push(this.stack[a]):this.stack[a]&&this.stack[a].close&&this.stack[a].close();var i=this.stack!=t;return this.stack=t,i}}}),Ze=$,$e={},af="not-loaded",bf=[],cf={run:function(e){if(!this.length)return!1;"loading"==Ze.ceEditor("state")?Ze.ceEditor("push",this):Ze.ceEditor("run",this,e)},destroy:function(){if(!this.length||"loaded"!=Ze.ceEditor("state"))return!1;Ze.ceEditor("destroy",this)},recover:function(){if(!this.length||"loaded"!=Ze.ceEditor("state"))return!1;Ze.ceEditor("recover",this)},val:function(e){return!(!this.length||"loaded"!=Ze.ceEditor("state"))&&Ze.ceEditor("val",this,e)},disable:function(e){if(!this.length||"loaded"!=Ze.ceEditor("state"))return!1;Ze.ceEditor("disable",this,e)}},Ze.fn.ceEditor=function(e){return cf[e]?cf[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void Ze.error("ty.editor: method "+e+" does not exist"):cf.run.apply(this,arguments)},Ze.ceEditor=function(e,t,a){if("push"==e){if(!t)return bf.unshift();bf.push(t)}else if("state"==e){if(!t)return af;if(af=t,"loaded"==t&&bf){for(var i=0;i<bf.length;i++)bf[i].ceEditor("run",a);bf=[]}}else if("handlers"==e)$e=t;else{if("run"==e||"destroy"==e||"recover"==e||"val"==e||"disable"==e)return $e[e](t,a);if("content_css"==e){var r=""!=_.frontend_css?_.frontend_css.split(","):[];return r.push(_.current_location+"/design/backend/css/wysiwyg_reset.css"),r}}},nf=$,of={display:function(){nf.cePreviewer("display",this)}},nf.fn.cePreviewer=function(e){return of[e]?of[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void nf.error("ty.previewer: method "+e+" does not exist"):of.run.apply(this,arguments)},nf.cePreviewer=function(e,t){if("handlers"==e)this.handlers=t;else if("display"==e)return this.handlers[e](t)},function(e){function t(t){var a=e(t);if(0==a.length)return!1;var i=a.prop("href").split("#")[1];return e("#"+i)}var a={init:function(){var e=t(this);if(0==e)return!1;e.find(".bar").css("width",0).prop("data-percentage",0),this.trigger("click"),this.data("ceProgressbar",!0)},setValue:function(e){var a=t(this);if(0==a)return!1;this.data("ceProgressbar")||this.ceProgress("init"),e.progress&&a.find(".bar").css("width",e.progress+"%").prop("data-percentage",e.progress),e.text&&a.find(".modal-body p").html(e.text)},getValue:function(e){var a=t(this);return 0!=a&&(this.data("ceProgressbar")?parseInt(a.find(".bar").prop("data-percentage")):0)},setTitle:function(a){if(0==t(this))return!1;this.data("ceProgressbar")||this.ceProgress("init"),a.title&&e("#comet_title").text(a.title)},finish:function(){var e=t(this);if(0==e)return!1;e.find(".bar").css("width",100).prop("data-percentage",100),e.modal("hide"),this.removeData("ceProgressbar")}};e.fn.ceProgress=function(t){return a[t]?a[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("ty.progress: method "+t+" does not exist"):a.init.apply(this,arguments)}}($),If=$,Jf=!1,Kf={init:function(){return!!If.history&&(If.history.init(function(e,t){if(1!=Jf){if(""!=e){var a=Kf.parseHash("#"+e);if(!a)return!1;var i=a,r=t.result_ids,o=If('a[data-ca-target-id="'+r+'"]:first'),n=o.prop("name");If.ceAjax("request",i,{full_render:t.full_render,result_ids:r,caching:!1,obj:o,skip_history:!0,callback:"ce.ajax_callback_"+n})}}else Jf=!1},{unescape:!1}),!0)},load:function(e,t){var a,i=window.location.hash?If.ceHistory("parseHash",window.location.hash):window.location;e=Kf.prepareHash(e),i=Kf.prepareHash(i),a={result_ids:t.result_ids,full_render:t.full_render},If.history.reload(i,a),If.history.load(e,a)},prepareHash:function(e){return-1!==(e=unescape(e)).indexOf("://")&&(e=e.str_replace(_.current_location+"/","")),Jf=!!_.embedded,e="!/"+(e=fn_query_remove(e,["result_ids"]))},parseHash:function(e){return-1!==e.indexOf("%")&&(e=unescape(e)),-1!=e.indexOf("#!")&&e.split("#!/")[1]||""}},If.ceHistory=function(e){if(Kf[e])return Kf[e].apply(this,Array.prototype.slice.call(arguments,1));If.error("ty.history: method "+e+" does not exist")},$f=$,_f={init:function(){return this.each(function(){var e=$f(this);e.bind({click:function(){$f(this).ceHint("_check_hint")},focus:function(){$f(this).ceHint("_check_hint")},focusin:function(){$f(this).ceHint("_check_hint")},blur:function(){$f(this).ceHint("_check_hint_focused")},focusout:function(){$f(this).ceHint("_check_hint_focused")}}),e.addClass("cm-hint-focused"),e.removeClass("cm-hint"),e.ceHint("_check_hint_focused")})},is_hint:function(){return $f(this).hasClass("cm-hint")&&$f(this).val()==$f(this).ceHint("_get_hint_value")},_check_hint:function(){var e=$f(this);e.ceHint("is_hint")&&(e.addClass("cm-hint-focused"),e.val(""),e.removeClass("cm-hint"))},_check_hint_focused:function(){var e=$f(this);e.hasClass("cm-hint-focused")&&(""!=e.val()&&e.val()!=e.ceHint("_get_hint_value")||(e.addClass("cm-hint"),e.removeClass("cm-hint-focused"),e.val(e.ceHint("_get_hint_value"))))},_get_hint_value:function(){return""!=$f(this).prop("title")?$f(this).prop("title"):$f(this).prop("defaultValue")}},$f.fn.ceHint=function(e){return _f[e]?_f[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $f.error("ty.hint: method "+e+" does not exist"):_f.run.apply(this,arguments)},eg=$,fg={init:function(){return this.each(function(){var e=eg(this),t=e.prop("id"),a=eg("#"+t+"_json").val();if(e.data("slider")||!a)return!1;var i=eg.parseJSON(a)||null;if(!i)return!1;e.slider({disabled:i.disabled,range:!0,min:i.min,max:i.max,step:i.step,values:[i.left,i.right],slide:function(e,a){eg("#"+t+"_left").val(a.values[0]),eg("#"+t+"_right").val(a.values[1])},change:function(e,t){var a=i.type+t.values[0]+"-"+t.values[1];"P"==i.type&&(a=a+"-"+i.currency);var r=i.url.replace(i.type+"###-###",a);i.ajax?eg.ceAjax("request",r,{full_render:!0,save_history:!0,result_ids:i.result_ids,caching:!0}):(eg.toggleStatusBox("show"),eg.redirect(r))}}),eg("#"+t+"_left").off("change").on("change",function(){var e=parseInt(eg("#"+t+"_left").val()),a=parseInt(eg("#"+t+"_right").val());eg("#"+t).slider("values",[isNaN(e)?0:e,isNaN(a)?0:a])}),eg("#"+t+"_right").off("change").on("change",function(){var e=parseInt(eg("#"+t+"_left").val()),a=parseInt(eg("#"+t+"_right").val());eg("#"+t).slider("values",[isNaN(e)?0:e,isNaN(a)?0:a])}),(e.parents(".filter-wrap").hasClass("cm-combo-off")||e.parent(".price-slider").hasClass("cm-custom-filter"))&&e.parent(".price-slider").show()})}},eg.fn.ceRangeSlider=function(e){return fg[e]?fg[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void eg.error("ty.rangeslider: method "+e+" does not exist"):fg.init.apply(this,arguments)},vg=$,vg.ceScrollerMethods={in_out_callback:function(e,t,a,i,r){if(e.allow_in_out_callback)if("next"==e.options.autoDirection)e.add(a+e.options.item_count,vg(t).html()),e.remove(a);else{var o=vg("li:last",e.list);e.add(o.data("caJcarouselindex")-e.options.item_count,o.html()),e.remove(o.data("caJcarouselindex"))}},next_callback:function(e,t,a,i,r){"next"==i&&(e.add(a+e.options.item_count,vg(t).html()),e.remove(a))},prev_callback:function(e,t,a,i,r){if("prev"==i){var o=vg("li:last",e.list),n=(t=o.html(),o.data("caJcarouselindex")-e.options.item_count);e.remove(o.data("caJcarouselindex")),e.add(n,t)}},init_callback:function(e,t){if("prev"==e.options.autoDirection){var a=e.buttonNext;e.buttonNext=e.buttonPrev,e.buttonPrev=a}vg(".jcarousel-clip",e.container).height(e.options.clip_height+"px"),vg(".jcarousel-clip",e.container).width(e.options.clip_width+"px");var i=e.options.clip_width;if(e.container.width(i),i>e.container.width()){var r=e.pos(e.options.start,!0);e.animate(r,!1)}e.clip.hover(function(){e.stopAuto()},function(){e.startAuto()}),(!vg.browser.msie||vg.browser.version>8)&&vg(window).on("beforeunload",function(){e.allow_in_out_callback=!1}),vg.browser.chrome&&vg.jcarousel.windowLoaded()}},Tg=$,Ug={init:function(e){var t={events:{def:"mouseover, mouseout",input:"focus, blur"},offset:[-2,-8]};return Tg.extend(t,e),this.each(function(){var e=Tg(this),a=t;if(e.data("tooltip"))return!1;e.is("input")?(a.position="bottom center",a.layout="<div><span></span></div>"):(a.position="bottom right",a.layout='<div><span class="tooltip-arrow"></span></div>'),e.tooltip(a)})}},Tg.fn.ceTooltip=function(e){return Ug[e]?Ug[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void Tg.error("ty.tooltip: method "+e+" does not exist"):Ug.init.apply(this,arguments)},$g=$,_g={init:function(e){return this.each(function(){var e=_.tr("text_position_updating"),t=$g(this),a=t.data("caSortableTable"),i=t.data("caSortableIdName"),r={accept:"cm-sortable-row",items:".cm-row-item",tolerance:"pointer",axis:"y",containment:"parent",opacity:"0.9",update:function(t,r){var o=[],n=[],s=$g(r.item).closest(".cm-sortable");$g(".cm-row-item",s).each(function(){var e=$g(this).prop("class").match(/cm-sortable-id-([^\s]+)/i),t=$g(this).index();o[t]=t,n[t]=e[1]});var c={positions:o.join(","),ids:n.join(",")};return $g.ceAjax("request",fn_url("tools.update_position?table="+a+"&id_name="+i),{method:"get",caching:!1,message:e,data:c}),!0}};$g(".cm-sortable-handle",t).length&&(r=$g.extend(r,{opacity:"0.5",handle:".cm-sortable-handle"})),t.sortable(r)})}},$g.fn.ceSortable=function(e){return _g[e]?_g[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $g.error("ty.sortable: method "+e+" does not exist"):_g.init.apply(this,arguments)},qh=$,rh={init:function(e){return this.each(function(){var e=qh(this);if(e.data("image_reloads"))return!1;e.data("image_reloads",1),qh("<img/>").prop("src",e.data("caImagePath")).on("load",function(){e.prop("src",qh(this).prop("src")),e.removeClass("spinner")}).on("error",function(){var t=qh(this);if(e.data("image_reloads")>3)return!1;e.data("image_reloads",e.data("image_reloads")+1),t.prop("src",t.prop("src")+"&1")})})}},qh.fn.ceThumbnails=function(e){return rh[e]?rh[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void qh.error("ty.thumbnails: method "+e+" does not exist"):rh.init.apply(this,arguments)},xh=$,yh={init:function(e){if(!xh(this).length)return!1;if(!xh.fn.spectrum){var t=xh(this);return xh.loadCss(["js/lib/spectrum/spectrum.css"]),xh.getScript("js/lib/spectrum/spectrum.js",function(){t.ceColorpicker()}),!1}var a=[["#000000","#434343","#666666","#999999","#b7b7b7","#cccccc","#d9d9d9","#efefef","#f3f3f3","#ffffff"],["#980000","#ff0000","#ff9900","#ffff00","#00ff00","#00ffff","#4a86e8","#0000ff","#9900ff","#ff00ff"],["#e6b8af","#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#c9daf8","#cfe2f3","#d9d2e9","#ead1dc"],["#dd7e6b","#ea9999","#f9cb9c","#ffe599","#b6d7a8","#a2c4c9","#a4c2f4","#9fc5e8","#b4a7d6","#d5a6bd"],["#cc4125","#e06666","#f6b26b","#ffd966","#93c47d","#76a5af","#6d9eeb","#6fa8dc","#8e7cc3","#c27ba0"],["#a61c00","#cc0000","#e69138","#f1c232","#6aa84f","#45818e","#3c78d8","#3d85c6","#674ea7","#a64d79"],["#85200c","#990000","#b45f06","#bf9000","#38761d","#134f5c","#1155cc","#0b5394","#351c75","#741b47"],["#5b0f00","#660000","#783f04","#7f6000","#274e13","#0c343d","#1c4587","#073763","#20124d","#4c1130"]];return this.each(function(){var e=xh(this),t={showInput:!0,showInitial:!0,showPalette:!0,showSelectionPalette:!0,palette:a,preferredFormat:"hex6"};e.data("caView")&&"palette"==e.data("caView")&&(t.showPaletteOnly=!0),e.data("caStorage")&&(t.localStorageKey=e.data("caStorage")),e.spectrum(t),e.spectrum("container").appendTo(e.parent()),xh.browser.msie&&e.spectrum("container").css("position","fixed")})},reset:function(){this.spectrum("set",this.val())},set:function(e){this.spectrum("set",e)}},xh.fn.ceColorpicker=function(e){return yh[e]?yh[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void xh.error("ty.colorpicker: method "+e+" does not exist"):yh.init.apply(this,arguments)},function(e){var t,a=2e3,i={},r={},o=[];function n(t,a){var i,r,o,n,s={};for(r=a?e(a,t).find("label"):e("label",t),k=0;k<r.length;k++)(o=(i=e(r[k])).prop("for"))&&i.prop("class")&&o.match(/^([a-z0-9-_]+)$/)&&(n=e("#"+o)).length&&!n.prop("disabled")&&(s[o]={elm:n,lbl:i});return s}function s(t,a){var n,s,c,d,p=!1;e(".cm-failed-field",t).removeClass("cm-failed-field"),errors={};for(var h in a){if(n=!1,s=a[h].elm,(c=a[h].lbl).hasClass("cm-trim")&&s.val(e.trim(s.val())),c.hasClass("cm-email")&&0==e.is.email(s.val())&&(c.hasClass("cm-required")||0==e.is.blank(s.val()))&&(l(_.tr("error_validator_email"),c),n=!0),c.hasClass("cm-color")&&0==e.is.color(s.val())&&(c.hasClass("cm-required")||0==e.is.blank(s.val()))&&(l(_.tr("error_validator_color"),c),n=!0),c.hasClass("cm-phone")&&1!=e.is.phone(s.val())&&(c.hasClass("cm-required")||0==e.is.blank(s.val()))&&(l(_.tr("error_validator_phone"),c),n=!0),c.hasClass("cm-zipcode")){var m=c.prop("class").match(/cm-location-([^\s]+)/i)[1]||"",f=e(".cm-country"+(m?".cm-location-"+m:""),t).val(),u=s.val();i[f]&&!s.val().match(i[f].regexp)&&(c.hasClass("cm-required")||0==e.is.blank(s.val()))&&(l(_.tr("error_validator_zipcode"),c,null,i[f].format),n=!0)}if(c.hasClass("cm-integer")&&0==e.is.integer(s.val())&&(c.hasClass("cm-required")||0==e.is.blank(s.val()))&&(l(_.tr("error_validator_integer"),c),n=!0),c.hasClass("cm-multiple")&&0==s.prop("length")&&(l(_.tr("error_validator_multiple"),c),n=!0),c.hasClass("cm-password")){var g=e("label.cm-password",t).not(c),v=e("#"+g.prop("for"));s.val()&&s.val()!=v.val()&&(l(_.tr("error_validator_password"),c,g),n=!0)}if(o)for(var b=0;b<o.length;b++)c.hasClass(o[b].class_name)&&1!=(C=o[b].func(h))&&(l(o[b].message,c),n=!0);if(c.hasClass("cm-regexp")&&void 0!==r[h]&&!s.ceHint("is_hint")){u=s.val();var C=new RegExp(r[h].regexp).test(u);C||!c.hasClass("cm-required")&&""==s.val()||(l(""!=r[h].message?r[h].message:_.tr("error_validator_message"),c),n=!0)}if((c.hasClass("cm-multiple-checkboxes")||c.hasClass("cm-multiple-radios"))&&c.hasClass("cm-required")){var y=c.hasClass("cm-multiple-checkboxes")?"[type=checkbox]":"[type=radio]";e(y+":not(:disabled)",s).length&&!e(y+":checked",s).length&&(l(_.tr("error_validator_required"),c),n=!0)}c.hasClass("cm-all")?0==s.prop("length")&&c.hasClass("cm-required")?(l(_.tr("error_validator_multiple"),c),n=!0):e("option",s).prop("selected",!0):s.is(":input")&&c.hasClass("cm-required")&&(s.is("[type=checkbox]")&&!s.prop("checked")||1==e.is.blank(s.val())||s.ceHint("is_hint"))&&(l(_.tr("error_validator_required"),c),n=!0),(d=s.closest(".cm-field-container")).length&&(s=d),e('[id="'+h+'_error_message"].help-inline',s.parent()).remove(),1==n?(c.parent().addClass("error"),s.addClass("cm-failed-field"),c.addClass("cm-failed-label"),s.hasClass("cm-no-failed-msg")||s.after('<span id="'+h+'_error_message" class="help-inline">'+("<p>"+errors[h].join("</p><p>")+"</p>")+"</span>"),p||(console.log(s),e.scrollToElm(s),p=!0)):(c.parent().removeClass("error"),s.removeClass("cm-failed-field"),c.removeClass("cm-failed-label"))}return!p}function c(t,i){var r,o,c=!0,l=!0;if(!i.hasClass("cm-skip-validation")){var d=n(t,i.data("caCheckFilter"));!1===e.ceEvent("trigger","ce.formpre_"+t.prop("name"),[t,i])&&(c=!1),l=s(t,d)}if(1==l&&1==c){if(o=[],(r=t).hasClass("cm-disable-empty")&&o.push("input[type=text]"),r.hasClass("cm-disable-empty-files")&&(o.push("input[type=file]"),e('input[type=file][data-ca-empty-file=""]',r).prop("disabled",!0)),o.length&&e(o.join(","),r).each(function(){var t=e(this);""==t.val()&&(t.prop("disabled",!0),t.addClass("cm-disabled"))}),t.find(".cm-numeric").each(function(){var t=e(this).autoNumeric("get");e(this).prop("value",t)}),1==i.data("clicked"))return!1;if(i.data("clicked",!0),setTimeout(function(){i.data("clicked",!1)},a),i.hasClass("cm-new-window"))return t.prop("target","_blank"),!0;if(i.hasClass("cm-parent-window"))return t.prop("target","_parent"),!0;if(t.prop("target","_self"),(t.hasClass("cm-ajax")||i.hasClass("cm-ajax"))&&!i.hasClass("cm-no-ajax")){var p=t.add(i);return(p.hasClass("cm-form-dialog-closer")||p.hasClass("cm-form-dialog-opener"))&&e.ceEvent("one","ce.formajaxpost_"+t.prop("name"),function(a,i){if(p.hasClass("cm-form-dialog-closer")&&e.popupStack.last_close(),p.hasClass("cm-form-dialog-opener")){var r=t.find("input[name=result_ids]").val();r&&e("#"+r).ceDialog("open",e.ceDialog("get_params",t))}}),e.ceAjax("submitForm",t,i)}return i.hasClass("cm-no-ajax")&&e("input[name=is_ajax]",t).remove(),!1===e.ceEvent("trigger","ce.formpost_"+t.prop("name"),[t,i])&&(c=!1),_.embedded&&1==c?(t.append('<input type="hidden" name="result_ids" value="'+_.container+'" />'),e.ceAjax("submitForm",t,i)):(i.closest(".cm-dialog-closer").length&&e.ceDialog("get_last").ceDialog("close"),c)}if(0==l){var h=e(".cm-failed-field",t).parents('[id^="content_"]:hidden');h.length&&e(".cm-failed-field",t).length==e(".cm-failed-field",h).length&&e("#"+h.prop("id").str_replace("content_","")).click()}return!1}function l(e,t,a,i){var r=t.prop("for");if(errors[r])return!1;errors[r]=[],e=e.str_replace("[field]",d(t)),a&&(e=e.str_replace("[field2]",d(a))),i&&(e=e.str_replace("[extra]",i)),errors[r].push(e)}function d(e){return e.text().replace(/(\s*\(\?\))?:\s*$/,"")}var p={init:function(){var a=e(this);a.on("submit",function(i){return t||(e("[type=submit]",a).length?t=e("[type=submit]:first",a):e("input[type=image]",a).length&&(t=e("input[type=image]:first",a))),c(a,t)})},setClicked:function(e){t=e}};e.checkFormValidator=function(a){var i=e(a);return t||(e("[type=submit]",i).length?t=e("[type=submit]:first",i):e("input[type=image]",i).length&&(t=e("input[type=image]:first",i))),function(t,a){var i=!0;if(a.hasClass("cm-skip-validation")||(i=s(t,n(t,a.data("caCheckFilter")))),0==i){var r=e(".cm-failed-field",t).parents('[id^="content_"]:hidden');r.length&&e(".cm-failed-field",t).length==e(".cm-failed-field",r).length&&e("#"+r.prop("id").str_replace("content_","")).click()}return!1}(i,t)},e.fn.ceFormValidator=function(t){var a=arguments;return e(this).each(function(i,r){return p[t]?p[t].apply(this,Array.prototype.slice.call(a,1)):"object"!=typeof t&&t?void e.error("ty.formvalidator: method "+t+" does not exist"):p.init.apply(this,a)})},e.ceFormValidator=function(t,a){a=a||{},"setZipcode"==t?i=a:"setRegexp"==t?r=e.extend(r,a):"registerValidator"==t&&o.push(a)}}($),function(e){var t={},a=!1;function i(){0==a&&(e(_.doc).on("change","select.cm-country",function(){var a=e(this).prop("class").match(/cm-location-([^\s]+)/i);a&&function(a,i){i=i||e(".cm-state.cm-location-"+a).prop("id");var r,o=e("select.cm-state.cm-location-"+a),n=e("input.cm-state.cm-location-"+a),s=n.val(),c=e(".cm-country.cm-location-"+a);r=c.length?c.prop("disabled"):o.prop("disabled");var l=c.length?c.val():t.default_country;if("VN"==l?(e(".shipping-zip-code").hide(),e(".shipping-zip-code input").attr("value","70000"),e(".billing-zip-code").hide(),e(".select-districts").show(),e(".select-ward").show()):(e(".shipping-zip-code input").attr("value",""),e(".shipping-zip-code").show(),e(".billing-zip-code").show(),e(".select-districts").hide(),e(".select-ward").hide()),o.prop("disabled",!1).removeClass("hidden cm-skip-avail-switch"),n.prop("disabled",!0).addClass("hidden cm-skip-avail-switch"),n.hasClass("disabled")||o.removeClass("disabled"),t.states&&t.states[l]){o.prop("length",1);for(var d=0;d<t.states[l].length;d++)o.append('<option value="'+t.states[l][d].code+'"'+(t.states[l][d].code==s?" selected":"")+">"+t.states[l][d].state+"</option>");o.prop("disabled",!1).removeClass("hidden cm-skip-avail-switch"),o.prop("disabled",!1).removeClass("hidden cm-skip-avail-switch"),n.prop("disabled",!0).addClass("hidden cm-skip-avail-switch"),n.hasClass("disabled")||o.removeClass("disabled")}else o.prop("disabled",!0).addClass("hidden cm-skip-avail-switch"),o.hasClass("disabled")||n.removeClass("disabled");1==r&&(o.prop("disabled",!0),n.prop("disabled",!0)),address_type=c.hasClass("cm-location-shipping")?"cm-location-shipping":"cm-location-billing",state_code=e(".cm-state."+address_type+" option:selected").val(),district_id=e(".cm-district."+address_type).parent().find("input").val(),street_id=e(".cm-street."+address_type).parent().find("input").val(),ward_id=e(".cm-ward."+address_type).parent().find("input").val(),l=c.val(),void 0!=e(".cm-district").val()&&(e(".cm-district").val()>0||select_district(state_code,l,address_type,district_id,!1)),void 0!=e(".cm-street").val()&&(e(".cm-street").val()>0||select_street(state_code,l,address_type,district_id,street_id)),void 0!=e(".cm-ward").val()&&(e(".cm-ward").val()>0||select_ward(state_code,l,address_type,district_id,ward_id,!1))}(a[1],e("select.cm-state.cm-location-"+a[1]).not(":disabled").prop("id"))}),a=!0)}var r={init:function(){i(),e(this).trigger("change")}};e.fn.ceRebuildStates=function(t){var a=arguments;return e(this).each(function(i,o){return r[t]?r[t].apply(this,Array.prototype.slice.call(a,1)):"object"!=typeof t&&t?void e.error("ty.rebuildstates: method "+t+" does not exist"):r.init.apply(this,a)})},e.ceRebuildStates=function(e,a){a=a||{},"init"==e&&(t=a)}}($),Aj=$,Aj.ceStickyScroll=function(e){var t,a,i=[];for(var r in e)if((t=Aj(r)).length){var o=Aj(".cm-demo-site-panel").outerHeight(!0)?Aj(".cm-demo-site-panel").outerHeight(!0):0;e[r].top+=o,i.push({elm:t,options:e[r],default_pos:t.offset().top-o})}a=i.length,Aj(window).scroll(function(){for(var e=0;e<a;e++)Aj(window).scrollTop()>i[e].options.top?i[e].elm.css({position:"fixed",top:i[e].options.padding+"px"}):i[e].elm.css({position:"absolute",top:i[e].default_pos+"px"})})},function(e){var t,a={},i=0;function r(e){return _.translate_mode&&-1!=e.indexOf("[lang")&&(e='<font class="cm-translate lang_'+e.substring(e.indexOf("=")+1,e.indexOf("]"))+'">'+e.substring(e.indexOf("]")+1,e.lastIndexOf("["))+"</font>"),e}function o(a){var i=e(".cm-notification-content",e(a.target));return i.length&&(n(i)||t.append(i)),!0}function n(t){var a=e.ceDialog("get_last");return!!a.length&&(e(".object-container",a).prepend(t),a.off("dialogclose",o),a.on("dialogclose",o),!0)}var s={show:function(i,o){if(e(".cm-notification-wrap").length>0&&e(".cm-notification-wrap").show(),o||(o=e.crc32(i.message)),void 0===i.message)return!1;if((l=e("div[data-ca-notification-key="+(c=o)+"]")).length&&(n(l)||l.fadeTo("fast",.5).fadeTo("fast",1).fadeTo("fast",.5).fadeTo("fast",1),a[c]&&(clearTimeout(a[c]),s.close(l,!0)),1))return!0;var c,l;if(i.message=r(i.message),i.title=r(i.title),"I"==i.type){var d=e.getWindowSizes();e(".cm-notification-content.cm-notification-content-extended").each(function(){s.close(e(this),!1)}),e(_.body).append('<div class="ui-widget-overlay" data-ca-notification-key="'+o+'"></div>');var p=e('<div class="cm-notification-content cm-notification-content-extended notification-content-extended '+("I"==i.message_state?" cm-auto-hide":"")+'" data-ca-notification-key="'+o+'"><h1>'+i.title+'<span class="cm-notification-close close"></span></h1><div class="notification-body-extended">'+i.message+"</div></div>");e("body").append(p),p.css("top",d.view_height/2-p.height()/2),e(".cm-generate-image",p).ceThumbnails()}else{var h="alert",m="";"N"==i.type?h+=" alert-success":"W"==i.type?h+=" alert-warning":h+=" alert-error","I"==i.message_state?h+=" cm-auto-hide":"S"==i.message_state&&(m+=" cm-notification-close-ajax"),n(p=e('<div class="cm-notification-content notification-content '+h+'" data-ca-notification-key="'+o+'"><button type="button" class="close cm-notification-close '+m+'" data-dismiss="alert"><i class="fa fa-times" aria-hidden="true"></i></button><strong>'+i.title+"</strong>"+i.message+"</div>"))||t.append(p)}"I"==i.message_state&&s.close(p,!0)},showMany:function(e){for(var t in e)s.show(e[t],t)},closeAll:function(){"object"==typeof t&&t.find(".cm-notification-content").each(function(){var t=e(this);t.hasClass("cm-notification-close-ajax")||s.close(t,!1)})},close:function(t,r){if(1==r)return 0===i||(a[t.data("caNotificationKey")]=setTimeout(function(){s.close(t,!1)},i),!0);!function(t){if(t.find(".cm-notification-close-ajax").length&&e.ceAjax("request",fn_url("notifications.close?notification_id="+t.data("caNotificationKey")),{hidden:!0}),t.fadeOut("fast",function(){t.remove()}),t.hasClass("cm-notification-content-extended")){var a=e(".ui-widget-overlay[data-ca-notification-key="+t.data("caNotificationKey")+"]");a.length&&a.fadeOut("fast",function(){a.remove()})}}(t),e(".cm-notification-wrap").hide()},init:function(){i=1e5*_.notice_displaying_time,t=e(".cm-notification-container"),e(_.doc).on("click",".cm-notification-close",function(){s.close(e(this).parents(".cm-notification-content:first"),!1)}),t.find(".cm-auto-hide").each(function(){s.close(e(this),!0)})}};e.ceNotification=function(t){if(s[t])return s[t].apply(this,Array.prototype.slice.call(arguments,1));e.error("ty.notification: method "+t+" does not exist")}}($),lk=$,mk={},nk={on:function(e,t,a){a=a||!1,e in mk||(mk[e]=[]),mk[e].push({handler:t,one:a})},one:function(e,t){nk.on(e,t,!0)},trigger:function(e,t){t=t||[];var a,i=!0;if(e in mk)for(var r=0;r<mk[e].length;r++)if(a=mk[e][r].handler.apply(mk[e][r].handler,t),mk[e][r].one&&mk[e].splice(r,1),!1===a){i=!1;break}return i}},lk.ceEvent=function(e){if(nk[e])return nk[e].apply(this,Array.prototype.slice.call(arguments,1));lk.error("ty.event: method "+e+" does not exist")},!_.embedded&&location.hash&&0===unescape(location.hash).indexOf("#!/")){var components=$.parseUrl(location.href),uri=$.ceHistory("parseHash",location.hash);$.redirect(components.protocol+"://"+components.host+components.directory+uri)}}(Tygh,jQuery);